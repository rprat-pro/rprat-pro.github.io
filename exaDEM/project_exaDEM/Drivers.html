<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>9. Drivers &mdash; ExaDEM &amp; ExaNBody  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. I/O and Analysis" href="Analysis.html" />
    <link rel="prev" title="8. Numerical Scheme" href="NumericalScheme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ExaDEM & ExaNBody
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ExaNB Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html">1. ExaNBody: Framework for N-Body Simulations on HPC Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#installing-exanb">2. Installing ExaNB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#n-body-background">3. N-Body Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#software-stack-of-exanbody">4. Software stack of ExaNBody</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#performance-and-portability">5. Performance and portability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#algorithm-patterns">6. Algorithm Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#list-of-plugins">7. List of Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#exanbody-command-lines">8. ExaNBody Command Lines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#tutorials">9. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#exanbody-publications">10. ExaNBody Publications:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/index.html#example-for-rst-usage-math-code-etc">11. Example for rst usage (math, code etc)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ExDEM Variant</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. ExaDEM Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Test_cases.html">3. Test cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="Polyhedra.html">4. Polyhedron</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spheres.html">5. Spheres</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fields.html">6. Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="ForceField.html">7. Force Field</a></li>
<li class="toctree-l1"><a class="reference internal" href="NumericalScheme.html">8. Numerical Scheme</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Drivers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-overview-of-drivers">9.1. Quick Overview of Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-driver-in-exadem">9.1.1. What is a driver in ExaDEM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-driver-to-your-simulation">9.1.2. Add a Driver To Your Simulation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#driver-descriptions">9.2. Driver Descriptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rotattion-drum-cylinder">9.2.1. Rotattion Drum / Cylinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wall-surface">9.2.2. Wall / Surface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ball-sphere">9.2.3. Ball / Sphere</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stl-mesh">9.2.4. STL Mesh</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Analysis.html">10. I/O and Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parallelization.html">11. Parallelization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">12. Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using exaNBody applications on Adastra</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/adastra.html">1. Installing ExaNB and Your application on Adastra</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bibliography</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project_exaNBody/bibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ExaDEM & ExaNBody</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">9. </span>Drivers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/project_exaDEM/Drivers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="drivers">
<h1><span class="section-number">9. </span>Drivers<a class="headerlink" href="#drivers" title="Permalink to this heading"></a></h1>
<p>This section provides an overview of the <code class="docutils literal notranslate"><span class="pre">drivers</span></code> implemented in <code class="docutils literal notranslate"><span class="pre">ExaDEM</span></code>, followed by a detailed description of each <code class="docutils literal notranslate"><span class="pre">driver</span></code> integrated into the system.</p>
<section id="quick-overview-of-drivers">
<h2><span class="section-number">9.1. </span>Quick Overview of Drivers<a class="headerlink" href="#quick-overview-of-drivers" title="Permalink to this heading"></a></h2>
<section id="what-is-a-driver-in-exadem">
<h3><span class="section-number">9.1.1. </span>What is a driver in ExaDEM<a class="headerlink" href="#what-is-a-driver-in-exadem" title="Permalink to this heading"></a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">ExaDEM</span></code>, a <code class="docutils literal notranslate"><span class="pre">driver</span></code> denotes a significant shape, such as walls, cylinders, or other geometric forms, which are treated differently from particles due to their unique characteristics. While the ExaDEM framework has been optimized and parallelized to effectively handle particles and polyhedra of comparable scales, <code class="docutils literal notranslate"><span class="pre">drivers</span></code> necessitate special treatment owing to their distinct properties. To accommodate multiple <code class="docutils literal notranslate"><span class="pre">drivers</span></code> in a simulation, ExaDEM offers flexibility through the creation of a <code class="docutils literal notranslate"><span class="pre">drivers</span></code> list. This feature allows users to include any number of <code class="docutils literal notranslate"><span class="pre">drivers</span></code> required to define boundary conditions and obstacles within the simulation environment.</p>
<p>The current implementation of <code class="docutils literal notranslate"><span class="pre">ExaDEM</span></code> includes a variety of <code class="docutils literal notranslate"><span class="pre">drivers</span></code>, each serving specific purposes within the simulation framework. The detailed list of implemented <code class="docutils literal notranslate"><span class="pre">drivers</span></code> is provided in the following table:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Glossary Of Drivers</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Driver Type</p></th>
<th class="head"><p>Operator Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Cylinder</p></td>
<td><p>CYLINDER</p></td>
<td><p>add_cylinder</p></td>
</tr>
<tr class="row-odd"><td><p>Wall / Surface</p></td>
<td><p>SURFACE</p></td>
<td><p>add_ball</p></td>
</tr>
<tr class="row-even"><td><p>Ball / Sphere</p></td>
<td><p>BALL</p></td>
<td><p>add_surface</p></td>
</tr>
<tr class="row-odd"><td><p>STL Mesh</p></td>
<td><p>STL_Mesh</p></td>
<td><p>add_stl_mesh</p></td>
</tr>
<tr class="row-even"><td><p>Undefined</p></td>
<td><p>UNDEFINED</p></td>
<td><p>no operator</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When adding a <code class="docutils literal notranslate"><span class="pre">driver</span></code> to the simulation in <code class="docutils literal notranslate"><span class="pre">ExaDEM</span></code>, it is essential to define a Hooke parameter list specific to the <code class="docutils literal notranslate"><span class="pre">driver</span></code> within the <cite>compute_hooke_interaction</cite> operator.</p>
</div>
</section>
<section id="add-a-driver-to-your-simulation">
<h3><span class="section-number">9.1.2. </span>Add a Driver To Your Simulation<a class="headerlink" href="#add-a-driver-to-your-simulation" title="Permalink to this heading"></a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">ExaDEM</span></code>, <code class="docutils literal notranslate"><span class="pre">drivers</span></code> are managed differently depending on whether spheres or polyhedra are used in the simulation. Forces are computed per interaction for polyhedra, while forces are computed per sphere:</p>
<blockquote>
<div><ul class="simple">
<li><p>Using spheres, a special contact force is added to handle interactions with drivers in the <code class="docutils literal notranslate"><span class="pre">hooke_force_driver</span></code> operator.</p></li>
<li><p>Using polyhedra, special interactions (described in the Polyhedra section) are added to the interaction lists. Additionally, you need to specify your driver list in the list of operators called <code class="docutils literal notranslate"><span class="pre">setup_drivers</span></code>, which is integrated into the default <code class="docutils literal notranslate"><span class="pre">ExaDEM</span></code> execution. It’s crucial to specify an ID for each driver. If you create a second driver with an already used ID, it will overwrite the previous driver configuration.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="driver-descriptions">
<h2><span class="section-number">9.2. </span>Driver Descriptions<a class="headerlink" href="#driver-descriptions" title="Permalink to this heading"></a></h2>
<p>In this section, we provide brief descriptions of available <code class="docutils literal notranslate"><span class="pre">drivers</span></code>. Please note that a test case is defined for each <code class="docutils literal notranslate"><span class="pre">driver</span></code> in the <code class="docutils literal notranslate"><span class="pre">example</span></code> directory.</p>
<section id="rotattion-drum-cylinder">
<h3><span class="section-number">9.2.1. </span>Rotattion Drum / Cylinder<a class="headerlink" href="#rotattion-drum-cylinder" title="Permalink to this heading"></a></h3>
<p>The rotation drum or cylinder driver represents an infinite cylinder along a specified axis. It is defined by parameters including its center, velocity, axis, and angular velocity.</p>
<p><a class="reference internal" href="../_images/rotating_drum_end.png"><img alt="ex1end" src="../_images/rotating_drum_end.png" style="width: 300pt;" /></a></p>
<ul class="simple">
<li><p>Operator name: <code class="docutils literal notranslate"><span class="pre">add_cylinder</span></code></p></li>
<li><p>Description: This operator add a cylinder to the drivers list.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><em>id</em>: Driver index</p></li>
<li><p><em>radius</em>: Cylinder radius</p></li>
<li><p><em>axis</em>: Define the plan of the cylinder</p></li>
<li><p><em>velocity</em>: Cylinder velocity, default is [0,0,0]</p></li>
<li><p><em>angular_velocity</em>: Angular velocity of the cylinder, default is 0 m.s-1</p></li>
</ul>
</li>
</ul>
<p>YAML example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">add_cylinder</span><span class="p">:</span>
<span class="w">   </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">   </span><span class="nt">center</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2.5</span><span class="p p-Indicator">]</span>
<span class="w">   </span><span class="nt">axis</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">   </span><span class="nt">radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">   </span><span class="nt">angular_velocity</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nv">0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="wall-surface">
<h3><span class="section-number">9.2.2. </span>Wall / Surface<a class="headerlink" href="#wall-surface" title="Permalink to this heading"></a></h3>
<p>The wall or surface driver represents an infinite wall within the simulation environment. It is defined by parameters including its normal vector, offset, and velocity. Please note that currently, no angular velocity is defined for this driver.</p>
<p><a class="reference internal" href="../_images/rigid_surface_end.png"><img alt="ex4end" src="../_images/rigid_surface_end.png" style="width: 300pt;" /></a></p>
<ul class="simple">
<li><p>Operator name: <code class="docutils literal notranslate"><span class="pre">add_surface</span></code></p></li>
<li><p>Description: This operator add a surface/wall to the drivers list.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><em>id</em>: Driver index</p></li>
<li><p><em>normal</em>: Normal vector of the rigid surface</p></li>
<li><p><em>offset</em>: ffset from the origin (0,0,0) of the rigid surface</p></li>
<li><p><em>velocity</em>: Wall/Surface velocity, default is [0,0,0]</p></li>
</ul>
</li>
</ul>
<p>YAML example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">add_surface</span><span class="p">:</span>
<span class="w">   </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">   </span><span class="nt">normal</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">   </span><span class="nt">offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.5</span>
</pre></div>
</div>
</section>
<section id="ball-sphere">
<h3><span class="section-number">9.2.3. </span>Ball / Sphere<a class="headerlink" href="#ball-sphere" title="Permalink to this heading"></a></h3>
<p>The ball or sphere driver represents a spherical object within the simulation environment. It is defined by parameters including its center, velocity, and angular velocity. This driver can be utilized as a boundary condition or obstacle in the simulation.</p>
<p><a class="reference internal" href="../_images/polyhedra_ball_end.png"><img alt="ex3pend" src="../_images/polyhedra_ball_end.png" style="width: 250pt;" /></a></p>
<ul class="simple">
<li><p>Operator name: <code class="docutils literal notranslate"><span class="pre">add_ball</span></code></p></li>
<li><p>Description: This operator add a ball / sphere (boundary condition or obstacle) to the drivers list.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><em>center</em>: Center of the ball / sphere</p></li>
<li><p><em>radius</em>: Radius of the ball / sphere</p></li>
<li><p><em>velocity</em>: Velocity of the ball / sphere</p></li>
<li><p><em>angular_velocity</em>: Angular velocity of the ball, default is 0 m.s-1</p></li>
</ul>
</li>
</ul>
<p>YAML example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">add_ball</span><span class="p">:</span>
<span class="w">   </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">   </span><span class="nt">center</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">]</span>
<span class="w">   </span><span class="nt">radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</pre></div>
</div>
</section>
<section id="stl-mesh">
<h3><span class="section-number">9.2.4. </span>STL Mesh<a class="headerlink" href="#stl-mesh" title="Permalink to this heading"></a></h3>
<p>The STL Mesh driver is constructed from an STL (Stereolithography) file to create a mesh of faces. This approach enables the rapid setup of complex geometries within the simulation environment. It’s important to note that faces in an STL mesh are processed as a sphere polyhedron, meaning a small layer is added around each face.</p>
<p><a class="reference internal" href="../_images/stl_mixte_end.png"><img alt="ex4pendmixte" src="../_images/stl_mixte_end.png" style="width: 250pt;" /></a></p>
<ul class="simple">
<li><p>Operator name: <code class="docutils literal notranslate"><span class="pre">add_stl_mesh</span></code></p></li>
<li><p>Description: This operator add a stl mesh to the drivers list.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><em>id</em>: Driver index</p></li>
<li><p><em>filename</em>: Input filename (.stl)</p></li>
<li><p><em>minskowski</em>: Minskowski radius value</p></li>
<li><p><em>center</em>: Center is defined but not used</p></li>
<li><p><em>velocity</em> : Velocity is defined but not used</p></li>
<li><p><em>angular_velocity</em>: Angular_velocity is defined but not used</p></li>
</ul>
</li>
<li><p>Operator name: <code class="docutils literal notranslate"><span class="pre">update_grid_stl_mesh</span></code></p></li>
<li><p>Description: Update the grid of lists of {vertices / edges / faces} in contact for every cells. The aim is to predefine a list of possible contacts with a cell for a stl mesh. These lists must be updated each time the grid changes.</p></li>
<li><p>Parameters: No parameter</p></li>
</ul>
<p>YAML example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">add_stl_mesh</span><span class="p">:</span>
<span class="w">   </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">   </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">box_for_octa.stl</span>
<span class="w">   </span><span class="nt">minskowski</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">update_grid_stl_mesh</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="NumericalScheme.html" class="btn btn-neutral float-left" title="8. Numerical Scheme" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Analysis.html" class="btn btn-neutral float-right" title="10. I/O and Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Thierry Carrard, Raphaël Prat, Jean-Philippe Perlat, Paul Lafourcade.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>